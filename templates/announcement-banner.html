<style>
  .announcement-banner {
    color: black;
    z-index: 150;
    display: flex;
    justify-content: center;
    align-items: center;

    position: relative;

    background: repeating-linear-gradient(
      45deg,
      var(--site-announcement-bar-stripe-color1),
      var(--site-announcement-bar-stripe-color1) 20px,
      var(--site-announcement-bar-stripe-color2) 10px,
      var(--site-announcement-bar-stripe-color2) 40px
    );
  }

  .announcement-banner {
    --site-announcement-bar-stripe-color1: #e5e7eb;
    --site-announcement-bar-stripe-color2: #d1d5db;
  }

  .announcement-banner[data-style="ocean"] {
    --site-announcement-bar-stripe-color1: #86b2f9;
    --site-announcement-bar-stripe-color2: #7298ea;
  }

  .announcement-banner[data-style="forest"] {
    --site-announcement-bar-stripe-color1: #97f5d6;
    --site-announcement-bar-stripe-color2: #6de0bf;
  }

  .announcement-banner[data-style="lava"] {
    --site-announcement-bar-stripe-color1: #fea3a3;
    --site-announcement-bar-stripe-color2: #e57e7e;
  }

  .announcement-banner p {
    margin: 0;
    padding: 1rem 3.5rem;

    /* make overflowd text to be dots */
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .announcement-banner button {
    right: 1rem;
    position: absolute;

    width: 3rem;
    height: 3rem;
    cursor: pointer !important;

    border: none;
    font-weight: 900;
    border-radius: 50%;
    background-color: transparent;
  }
</style>

<div class="announcement-banner" data-style="{% style|default %}" data-name="{% name %}">
  {% message %} <button type="button">X</button>
</div>

<script>
  const localData = JSON.parse(localStorage.getItem("announcement-banner"));
  const banner = document.querySelector(".announcement-banner");
  const name = banner.getAttribute("data-name");

  if (localData && localData.hide === true && localData.name === name) banner.remove();
  else {
    // move banner before page class element slibling
    const page = document.querySelector(".page");
    page.parentNode.insertBefore(banner, page);

    // add event listener to close button
    banner.querySelector("button").addEventListener("click", () => {
      banner.remove();
      localStorage.setItem("announcement-banner", JSON.stringify({ name, hide: true }));
    });
  }
</script>
